(function(){window.STR==null&&(window.STR={}),STR.UserCookieSync||(STR.UserCookieSync={Helpers:{}})}).call(this),function(){var e=window.UUID,t=function(){};t.noConflict=function(){var t=window.UUID;return window.UUID=e,t},t.generate=function(){var e=t._getRandomInt,n=t._hexAligner;return n(e(32),8)+"-"+n(e(16),4)+"-"+n(16384|e(12),4)+"-"+n(32768|e(14),4)+"-"+n(e(48),12)},t._getRandomInt=function(e){return e<0?NaN:e<=30?0|Math.random()*(1<<e):e<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN},t._getIntAligner=function(e){return function(t,n){var r=t.toString(e),i=n-r.length,s="0";for(;i>0;i>>>=1,s+=s)i&1&&(r=s+r);return r}},t._hexAligner=t._getIntAligner(16),t.FIELD_NAMES=["timeLow","timeMid","timeHiAndVersion","clockSeqHiAndReserved","clockSeqLow","node"],t.FIELD_SIZES=[32,16,16,8,8,48],t.genV4=function(){var e=t._getRandomInt;return(new t)._init(e(32),e(16),16384|e(12),128|e(6),e(8),e(48))},t.parse=function(e){var n,r=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i;return(n=r.exec(e))?(new t)._init(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),parseInt(n[4],16),parseInt(n[5],16),parseInt(n[6],16)):null},t.prototype._init=function(){var e=t.FIELD_NAMES,n=t.FIELD_SIZES,r=t._binAligner,i=t._hexAligner;this.intFields=new Array(6),this.bitFields=new Array(6),this.hexFields=new Array(6);for(var s=0;s<6;s++){var o=parseInt(arguments[s]||0);this.intFields[s]=this.intFields[e[s]]=o,this.bitFields[s]=this.bitFields[e[s]]=r(o,n[s]),this.hexFields[s]=this.hexFields[e[s]]=i(o,n[s]/4)}return this.version=this.intFields.timeHiAndVersion>>12&15,this.bitString=this.bitFields.join(""),this.hexString=this.hexFields[0]+"-"+this.hexFields[1]+"-"+this.hexFields[2]+"-"+this.hexFields[3]+this.hexFields[4]+"-"+this.hexFields[5],this.urn="urn:uuid:"+this.hexString,this},t._binAligner=t._getIntAligner(2),t.prototype.toString=function(){return this.hexString},t.prototype.equals=function(e){if(e instanceof t){for(var n=0;n<6;n++)if(this.intFields[n]!==e.intFields[n])return!1;return!0}return!1},t.genV1=function(){var e=(new Date).getTime(),n=t._state;e!=n.timestamp?(e<n.timestamp&&n.sequence++,n.timestamp=e,n.tick=t._getRandomInt(4)):Math.random()<t._tsRatio&&n.tick<9984?n.tick+=1+t._getRandomInt(4):n.sequence++;var r=t._getTimeFieldValues(n.timestamp),i=r.low+n.tick,s=r.hi&4095|4096;n.sequence&=16383;var o=n.sequence>>>8|128,u=n.sequence&255;return(new t)._init(i,r.mid,s,o,u,n.node)},t.resetState=function(){t._state=new t._state.constructor},t._tsRatio=.25,t._state=new function(){var n=t._getRandomInt;this.timestamp=0,this.sequence=n(14),this.node=(n(8)|1)*1099511627776+n(40),this.tick=n(4)},t._getTimeFieldValues=function(e){var t=e-Date.UTC(1582,9,15),n=t/4294967296*1e4&268435455;return{low:(t&268435455)*1e4%4294967296,mid:n&65535,hi:n>>>16,timestamp:t}},t.makeBackwardCompatible=function(){var e=t.generate;t.generate=function(n){return n&&n.version==1?t.genV1().hexString:e.call(t)},t.makeBackwardCompatible=function(){}},window.UUID=t}(),function(){STR.Vendor==null&&(STR.Vendor={}),STR.Vendor.UUID=UUID.noConflict()}.call(this),function(){STR.UserCookieSync.Helpers.UserCookieSyncHelper=function(){function r(){}var e,t,n;return t="stx_user_id",e=90,n=null,r.prototype.cookieUser=function(){var e,t;t=this._createUserIdIfNotExist();if(this.isNewUser){e=this._getCommonStringParams(t);if(this._verifyUserParam(e))return this._sendUserToServer(e)}},r.prototype.syncDsp=function(){var e,t;t=this._createUserIdIfNotExist(),e=this._getCommonStringParams(t)+"&"+this._getDspStringParams();if(this._verifyDspParam(e))return this._sendUserToServer(e)},r.prototype.deleteUser=function(){var e,t;t=this._createUserIdIfNotExist(),e=this._getCommonStringParams(t)+"&"+this._getDeleteParam();if(this._setUserOptoutCookie()&&this._verifyDeleteParam(e))return this._sendUserToServer(e)},r.prototype._setUserOptoutCookie=function(){return document.cookie.indexOf("str_opt_out")>-1?!1:(document.cookie="str_opt_out=true",!0)},r.prototype._verifyDspParam=function(e){return this._verifyUserParam(e)&&e.indexOf("source_id=")>-1&&e.indexOf("source_user_id=")>-1},r.prototype._verifyUserParam=function(e){return e.indexOf("stx_user_id=")>-1&&e.indexOf("date=")>-1},r.prototype._verifyDeleteParam=function(e){return this._verifyUserParam(e)&&e.indexOf("action=delete")>-1},r.prototype._getCommonStringParams=function(e){var t,n,r,i,s;return(e!=null?e.length:void 0)?(t=new Date,s=t.getFullYear().toString(),i=(t.getMonth()+1).toString(),i=i.length>1?i:"0"+i,n=t.getDate().toString(),n=n.length>1?n:"0"+n,r=""+s+"-"+i+"-"+n,"stx_user_id="+e+"&date="+r):""},r.prototype._getDspStringParams=function(){var e,t,n;e=document.querySelector('script[data-id="STR_DSP_ID"]');if(e){t=e.getAttribute("data-source-id"),n=e.getAttribute("data-source-user-id");if(t&&n)return"source_id="+t+"&source_user_id="+n}return""},r.prototype._getDeleteParam=function(){return"action=delete"},r.prototype._createUserIdIfNotExist=function(){var n;return this._hasNotSetUserCookie()?(this.isNewUser=!0,n=STR.Vendor.UUID.generate(),this._setUserCookie(n,e),n):(this.isNewUser=!1,this._getCookieValue(t))},r.prototype._hasNotSetUserCookie=function(){return document.cookie.indexOf(t)===-1},r.prototype._sendUserToServer=function(e){var t,n;return n="//match.sharethrough.com?"+e,t=new Image,t.src=n},r.prototype._getCookieValue=function(e){var t,n,r,i,s;r=document.cookie.split(";");for(i=0,s=r.length;i<s;i++){n=r[i],t=n.split("=");if(t[0].trim()===e)return t[1].trim()}},r.prototype._setUserCookie=function(e,n){var r,i;return i=new Date,i.setTime(i.getTime()+n*24*60*60*1e3),r=""+t+"="+e+"; expires="+i.toGMTString()+"; domain=.sharethrough.com;path=/",document.cookie=r},r}()}.call(this),(new STR.UserCookieSync.Helpers.UserCookieSyncHelper).syncDsp();